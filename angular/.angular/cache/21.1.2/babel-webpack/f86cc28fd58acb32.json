{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/bagia/Desktop/S1/notes cours/Web/VersionMax/Web-Sampler-cours-2/Web-Sampler-deploiment/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { PresetsService } from '../presets.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../presets.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nconst _c0 = () => [];\nconst _c1 = a0 => [\"/modifysampler\", a0];\nfunction PresetsListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction PresetsListComponent_section_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"section\", 6)(1, \"div\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 8)(4, \"button\", 9);\n    i0.ɵɵtext(5, \"Modifier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function PresetsListComponent_section_4_Template_button_click_6_listener() {\n      const p_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.rename(p_r3));\n    });\n    i0.ɵɵtext(7, \"Rename\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function PresetsListComponent_section_4_Template_button_click_8_listener() {\n      const p_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r0 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r0.delete(p_r3));\n    });\n    i0.ɵɵtext(9, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, p_r3.name));\n  }\n}\nexport let PresetsListComponent = /*#__PURE__*/(() => {\n  class PresetsListComponent {\n    svc;\n    // null = en cours de chargement, [] ou plus = chargé\n    presets = null;\n    error = null;\n    constructor(svc) {\n      this.svc = svc;\n    }\n    ngOnInit() {\n      this.load();\n    }\n    // fonction de chargement de la liste des presets depuis le back end\n    // appelé lors de l'initialisation du composant et après chaque modification\n    load() {\n      this.error = null;\n      this.presets = null;\n      this.svc.list().subscribe({\n        next: res => {\n          console.log('Presets chargés depuis API', res);\n          this.presets = res || [];\n        },\n        error: err => {\n          console.error('Erreur lors du chargement des presets', err);\n          this.error = String(err?.message || err);\n          this.presets = [];\n        }\n      });\n    }\n    // fonction de renommage de preset\n    rename(p) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const n = prompt('Nouveau nom pour le preset', p.name);\n        if (!n || n.trim() === '' || n === p.name) return;\n        _this.svc.rename(p.name, n).subscribe({\n          next: () => _this.load(),\n          error: e => alert('Erreur: ' + (e?.message || e))\n        });\n      })();\n    }\n    // fonction de suppression de preset avec confirmation\n    delete(p) {\n      if (!confirm(`Supprimer le preset \"${p.name}\" ?`)) return;\n      this.svc.delete(p.name).subscribe({\n        next: () => this.load(),\n        error: e => alert('Erreur lors de la suppression: ' + (e?.message || e))\n      });\n    }\n    static ɵfac = function PresetsListComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || PresetsListComponent)(i0.ɵɵdirectiveInject(i1.PresetsService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PresetsListComponent,\n      selectors: [[\"app-presets-list\"]],\n      decls: 7,\n      vars: 5,\n      consts: [[1, \"example-flex-container\"], [\"style\", \"color:red\", 4, \"ngIf\"], [1, \"muted\"], [\"class\", \"preset-row\", 4, \"ngFor\", \"ngForOf\"], [\"routerLink\", \"/createsampler\", 1, \"action\"], [2, \"color\", \"red\"], [1, \"preset-row\"], [1, \"example-label\"], [1, \"example-button-row\"], [1, \"action\", 3, \"routerLink\"], [1, \"action\", \"secondary\", 3, \"click\"]],\n      template: function PresetsListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, PresetsListComponent_div_1_Template, 2, 1, \"div\", 1);\n          i0.ɵɵelementStart(2, \"div\", 2);\n          i0.ɵɵtext(3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, PresetsListComponent_section_4_Template, 10, 4, \"section\", 3);\n          i0.ɵɵelementStart(5, \"button\", 4);\n          i0.ɵɵtext(6, \"Cr\\u00E9er un preset vide\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"Nombre de presets charg\\u00E9s : \", (ctx.presets || i0.ɵɵpureFunction0(3, _c0)).length);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngForOf\", ctx.presets || i0.ɵɵpureFunction0(4, _c0));\n        }\n      },\n      dependencies: [CommonModule, i2.NgForOf, i2.NgIf, RouterModule, i3.RouterLink],\n      styles: [\".example-flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-width:900px;margin:0 auto}section.preset-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px 12px;border:1px solid #eee;border-radius:6px;background:#fff}.example-label[_ngcontent-%COMP%]{font-size:14px;margin:0 16px 0 8px;min-width:160px;font-weight:600;color:#222}.example-button-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.example-button-row[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #bbb;background:#f6f6f6;border-radius:4px;cursor:pointer}.example-button-row[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:hover{background:#eef3ff;border-color:#8aa0ff}.action.secondary[_ngcontent-%COMP%]{background:#fff;border-color:#ddd}@media(max-width:640px){section.preset-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}.example-label[_ngcontent-%COMP%]{min-width:0}.example-button-row[_ngcontent-%COMP%]{justify-content:flex-end}}.footer-actions[_ngcontent-%COMP%]{margin-top:16px;text-align:right}\"]\n    });\n  }\n  return PresetsListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}